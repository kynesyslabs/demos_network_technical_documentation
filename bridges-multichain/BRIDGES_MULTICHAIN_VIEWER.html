<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bridges & Multichain Integration - Mermaid Diagrams</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.1/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        nav {
            background-color: white;
            padding: 1rem 2rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: center;
        }

        nav a {
            color: #667eea;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            transition: all 0.3s ease;
            font-weight: 500;
            border: 1px solid transparent;
        }

        nav a:hover {
            background-color: #667eea;
            color: white;
            border-color: #667eea;
        }

        nav a.active {
            background-color: #667eea;
            color: white;
        }

        .container {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .diagram-section {
            background-color: white;
            border-radius: 10px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .diagram-section h2 {
            color: #667eea;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid #667eea;
        }

        .mermaid {
            background-color: #fafafa;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
            border: 1px solid #e0e0e0;
        }

        .key-concepts {
            background-color: #f0f4ff;
            border-left: 4px solid #667eea;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 5px;
        }

        .key-concepts h4 {
            color: #667eea;
            margin-bottom: 0.5rem;
        }

        .key-concepts ul {
            margin-left: 1.5rem;
            margin-top: 0.5rem;
        }

        .key-concepts li {
            margin-bottom: 0.3rem;
        }

        .file-reference {
            background-color: #fff9e6;
            border-left: 4px solid #ffa726;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .controls {
            display: flex;
            gap: 1rem;
            margin: 20px auto;
            justify-content: center;
        }

        .btn {
            background-color: #667eea;
            color: white;
            border: none;
            padding: 1rem 1.5rem;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 2rem;
            margin-top: 3rem;
        }

        @media print {
            nav, .controls {
                display: none;
            }
            .diagram-section {
                page-break-inside: avoid;
            }
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8rem;
            }
            nav {
                padding: 0.5rem;
            }
            nav a {
                font-size: 0.85rem;
                padding: 0.4rem 0.8rem;
            }
            .container {
                padding: 0 1rem;
            }
        }

        #section-1 .diagram-section { border-top: 4px solid #2196F3; }
        #section-2 .diagram-section { border-top: 4px solid #4CAF50; }
        #section-3 .diagram-section { border-top: 4px solid #FF9800; }
        #section-4 .diagram-section { border-top: 4px solid #9C27B0; }
        #section-5 .diagram-section { border-top: 4px solid #F44336; }
        #section-6 .diagram-section { border-top: 4px solid #00BCD4; }
        #section-7 .diagram-section { border-top: 4px solid #3F51B5; }
        #section-8 .diagram-section { border-top: 4px solid #E91E63; }
        #section-9 .diagram-section { border-top: 4px solid #009688; }
        #section-10 .diagram-section { border-top: 4px solid #795548; }
    </style>
</head>
<body>
    <header>
        <h1>üåâ Bridges & Multichain Integration</h1>
        <p>Comprehensive Mermaid Diagrams for Demos Blockchain</p>
    </header>

    <nav id="nav">
        <a href="#section-1" onclick="setActive(this)">1. Architecture</a>
        <a href="#section-2" onclick="setActive(this)">2. XM Scripts</a>
        <a href="#section-3" onclick="setActive(this)">3. Execution Flow</a>
        <a href="#section-4" onclick="setActive(this)">4. Cross-Chain Pay</a>
        <a href="#section-5" onclick="setActive(this)">5. Contract Ops</a>
        <a href="#section-6" onclick="setActive(this)">6. Native Bridge</a>
        <a href="#section-7" onclick="setActive(this)">7. Bridge Context</a>
        <a href="#section-8" onclick="setActive(this)">8. Rubic Swaps</a>
        <a href="#section-9" onclick="setActive(this)">9. Multi-Chain Exec</a>
        <a href="#section-10" onclick="setActive(this)">10. Lifecycle</a>
    </nav>

    <div class="container">
        <div class="diagram-section" style="background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%); border: none;">
            <h2>üìã Overview</h2>
            <p style="margin-bottom: 1rem;">
                Demos blockchain provides comprehensive cross-chain and multichain capabilities through XM (Cross-chain/Multichain) Scripts, Native Bridges, and integration with Rubic SDK for token swaps. The system supports operations across multiple blockchains including EVM chains, Solana, and Aptos.
            </p>
            <div class="key-concepts">
                <h4>üéØ Key Features</h4>
                <ul>
                    <li><strong>XM Scripts</strong>: JSON-based multichain operation scripts with multiple operation types</li>
                    <li><strong>Cross-Chain Operations</strong>: Pay, contract read/write, balance queries across chains</li>
                    <li><strong>Native Bridge</strong>: Controlled bridge system with CVSA-based controller coordination</li>
                    <li><strong>Rubic Integration</strong>: Cross-chain token swaps via Rubic API v2</li>
                    <li><strong>Multi-Chain Support</strong>: EVM chains, Solana, Aptos with unified interface</li>
                    <li><strong>Operation Executors</strong>: Specialized handlers for each chain and operation type</li>
                    <li><strong>Transaction Compilation</strong>: Client-side signing flow for bridge operations</li>
                </ul>
            </div>
        </div>

        <!-- Section 1: Architecture Overview -->
        <div id="section-1">
            <div class="diagram-section">
                <h2>1. Bridges & Multichain Architecture Overview</h2>
                <div class="key-concepts">
                    <h4>üîë Key Concepts</h4>
                    <ul>
                        <li><strong>XMDispatcher</strong>: Entry point for XM Script processing</li>
                        <li><strong>XMParser</strong>: Parses and executes individual operations</li>
                        <li><strong>Operation Executors</strong>: Chain-specific handlers (pay, contract read/write, balance)</li>
                        <li><strong>Native Bridge</strong>: Multiton pattern, CVSA-based controllers</li>
                        <li><strong>Rubic Service</strong>: Integration with Rubic API v2 for cross-chain swaps</li>
                        <li><strong>Multi-Chain Support</strong>: EVM (Ethereum, Polygon, BSC, etc.), Solana, Aptos</li>
                    </ul>
                </div>
                <div class="mermaid">
graph TB
    subgraph "Client Side"
        USER[User/DApp]
        SDK[Demos SDK]
    end

    subgraph "Demos Node: Multichain Layer"
        DISPATCHER[XMDispatcher]
        PARSER[XMParser]
        EXECUTORS[Operation Executors]
        NATIVEBRIDGE[Native Bridge Manager]
        RUBIC[Rubic Service]
    end

    subgraph "Bridge System"
        BRIDGECLASS[Bridge Multiton Class]
        BRIDGECONTEXT[Bridge Context]
        BRIDGEOPS[Bridge Operations Map]
        CONTROLLERS[Controller Shard CVSA]
    end

    subgraph "Operation Executors"
        PAY[Pay Executor]
        CONTRACTREAD[Contract Read Executor]
        CONTRACTWRITE[Contract Write Executor]
        BALANCE[Balance Query Executor]
    end

    subgraph "External Blockchains"
        EVM[EVM Chains<br/>Ethereum, Polygon, BSC<br/>Avalanche, Optimism, Arbitrum]
        SOLANA[Solana]
        APTOS[Aptos]
    end

    subgraph "Bridge Providers"
        RUBICSDK[Rubic API v2]
        RPC[Chain RPC Providers]
    end

    USER --> SDK
    SDK --> DISPATCHER
    DISPATCHER --> PARSER
    PARSER --> EXECUTORS

    EXECUTORS --> PAY
    EXECUTORS --> CONTRACTREAD
    EXECUTORS --> CONTRACTWRITE
    EXECUTORS --> BALANCE

    SDK --> NATIVEBRIDGE
    NATIVEBRIDGE --> BRIDGECLASS
    BRIDGECLASS --> BRIDGECONTEXT
    BRIDGECLASS --> BRIDGEOPS
    BRIDGECONTEXT --> CONTROLLERS

    SDK --> RUBIC
    RUBIC --> RUBICSDK

    PAY --> RPC
    CONTRACTREAD --> RPC
    CONTRACTWRITE --> RPC
    BALANCE --> RPC

    RPC --> EVM
    RPC --> SOLANA
    RPC --> APTOS

    RUBICSDK --> EVM
    RUBICSDK --> SOLANA

    style DISPATCHER fill:#e1f5ff
    style PARSER fill:#fff4e1
    style EXECUTORS fill:#e8f5e9
    style BRIDGECLASS fill:#f3e5f5
    style RUBIC fill:#ffe0b2
                </div>
                <div class="file-reference">
                    <strong>üìÅ File References:</strong>
                    XMDispatcher.ts:71, XMParser.ts:153, bridges.ts:114
                </div>
            </div>
        </div>

        <!-- Continue with remaining sections 2-10 -->
        <!-- For brevity in this response, I'll show the structure for a few more sections -->

        <div id="section-2">
            <div class="diagram-section">
                <h2>2. XM Script Structure & Parsing</h2>
                <div class="key-concepts">
                    <h4>üîë Key Concepts</h4>
                    <ul>
                        <li><strong>XM Script Format</strong>: JSON object with operations property</li>
                        <li><strong>IOperation Fields</strong>: chain, subchain, is_evm, task (type and params)</li>
                        <li><strong>Operation Types</strong>: pay, contract_read, contract_write, balance_query</li>
                        <li><strong>Chain ID Resolution</strong>: Automatic for EVM chains from config or subchain</li>
                        <li><strong>Result Handling</strong>: Per-operation success/failure with overall script status</li>
                    </ul>
                </div>
                <div class="mermaid">
flowchart TD
    START([Client creates XM Script])
    START --> XMSTRUCT[XM Script Structure]
    subgraph "XM Script JSON Format"
        XMSTRUCT --> OPERATIONS[operations object]
        OPERATIONS --> OP1["operation_name_1: IOperation"]
        OPERATIONS --> OP2["operation_name_2: IOperation"]
        OP1 --> OPFIELDS[IOperation fields]
        OPFIELDS --> CHAIN[chain: string]
        OPFIELDS --> SUBCHAIN[subchain: string]
        OPFIELDS --> ISEVM[is_evm: boolean]
        OPFIELDS --> TASK[task object]
        TASK --> TASKTYPE[type: pay, contract_read, etc.]
        TASK --> PARAMS[params: operation-specific]
    end
    XMSTRUCT --> SENDTONODE[Send to Demos node via RPC]
    SENDTONODE --> DISPATCHER[XMDispatcher.digest]
    DISPATCHER --> PARSER[XMParser.execute]
    PARSER --> COLLECTRESULTS[Collect all operation results]
    COLLECTRESULTS --> ALLFAILED{All operations<br/>failed?}
    ALLFAILED -->|yes| FAILRESPONSE[Return: success false]
    ALLFAILED -->|no| SUCCESSRESPONSE[Return: success true]
    style START fill:#e1f5ff
    style DISPATCHER fill:#fff4e1
    style SUCCESSRESPONSE fill:#c8e6c9
                </div>
                <div class="file-reference">
                    <strong>üìÅ File Reference:</strong> src/features/multichain/XMParser.ts:63 (execute function)
                </div>
            </div>
        </div>

        <!-- Simplified remaining sections for brevity -->
        <div id="section-3">
            <div class="diagram-section">
                <h2>3. XM Operation Execution Flow</h2>
                <div class="key-concepts">
                    <h4>üîë Key Concepts</h4>
                    <ul>
                        <li>Loop through all operations in XM Script</li>
                        <li>Dispatch to appropriate executor based on task type</li>
                        <li>Chain-specific RPC interactions</li>
                        <li>Result collection with partial success support</li>
                    </ul>
                </div>
                <div class="mermaid">
sequenceDiagram
    participant Client
    participant XMDispatcher
    participant XMParser
    participant Executor
    participant ChainRPC
    Client->>XMDispatcher: Submit XM Script
    XMDispatcher->>XMParser: execute(script)
    loop For each operation
        XMParser->>Executor: executeOperation
        Executor->>ChainRPC: Send transaction or query
        ChainRPC->>Executor: Return result
        Executor->>XMParser: Store result
    end
    XMParser->>Client: Return all results
                </div>
            </div>
        </div>

        <div id="section-4">
            <div class="diagram-section">
                <h2>4. Cross-Chain Payment (Pay Operation)</h2>
                <div class="key-concepts">
                    <h4>üîë Key Concepts</h4>
                    <ul>
                        <li>EVM: Web3 transaction with gas estimation</li>
                        <li>Solana: SystemProgram.transfer instruction</li>
                        <li>Aptos: Coin transfer payload</li>
                        <li>Chain-specific signing and submission</li>
                    </ul>
                </div>
                <div class="mermaid">
flowchart TD
    START([handlePayOperation called])
    START --> PARSECHAIN{Chain type?}
    PARSECHAIN -->|EVM| EVMPAY[Build Web3 transaction]
    PARSECHAIN -->|Solana| SOLANAPAY[Create transfer instruction]
    PARSECHAIN -->|Aptos| APTOSPAY[Build coin transfer]
    EVMPAY --> EVMRESULT[Return tx hash]
    SOLANAPAY --> SOLRESULT[Return signature]
    APTOSPAY --> APTRESULT[Return hash]
    style START fill:#e1f5ff
    style EVMRESULT fill:#c8e6c9
                </div>
            </div>
        </div>

        <div id="section-5">
            <div class="diagram-section">
                <h2>5. Contract Read/Write Operations</h2>
                <div class="key-concepts">
                    <h4>üîë Key Concepts</h4>
                    <ul>
                        <li>Contract Read: No gas, query state directly</li>
                        <li>Contract Write: Build transaction, sign, send</li>
                        <li>ABI parsing for method encoding</li>
                    </ul>
                </div>
                <div class="mermaid">
sequenceDiagram
    participant Executor
    participant Contract
    participant Blockchain
    Note over Executor,Blockchain: Contract Read
    Executor->>Contract: Call method (read-only)
    Contract->>Blockchain: Query state
    Blockchain->>Executor: Return data
    Note over Executor,Blockchain: Contract Write
    Executor->>Contract: Encode method call
    Executor->>Blockchain: Send signed transaction
    Blockchain->>Executor: Return tx hash
                </div>
            </div>
        </div>

        <div id="section-6">
            <div class="diagram-section">
                <h2>6. Native Bridge Operation Compilation</h2>
                <div class="key-concepts">
                    <h4>üîë Key Concepts</h4>
                    <ul>
                        <li>Two-step flow: compile ‚Üí client signs ‚Üí submit</li>
                        <li>Origin chain verification (EVM or Solana)</li>
                        <li>Compiled operation with validUntil expiry</li>
                        <li>RPC signature for verification</li>
                    </ul>
                </div>
                <div class="mermaid">
flowchart TD
    START([Client requests bridge operation])
    START --> MANAGE[manageNativeBridge]
    MANAGE --> PARSE{Parse originChain}
    PARSE -->|EVM| PARSEVM[Verify EVM transaction]
    PARSE -->|SOLANA| PARSESOL[Verify Solana transaction]
    PARSEVM --> COMPILE[Create compiled operation]
    PARSESOL --> COMPILE
    COMPILE --> RETURNCLIENT[Return to client]
    RETURNCLIENT --> CLIENTSIGN[Client signs]
    CLIENTSIGN --> SUBMIT[Submit transaction]
    style START fill:#e1f5ff
    style COMPILE fill:#c8e6c9
                </div>
            </div>
        </div>

        <div id="section-7">
            <div class="diagram-section">
                <h2>7. Bridge Context & Multiton Pattern</h2>
                <div class="key-concepts">
                    <h4>üîë Key Concepts</h4>
                    <ul>
                        <li>Multiton: One instance per chain+address</li>
                        <li>CVSA-based controller coordination</li>
                        <li>Valid from/to block numbers</li>
                        <li>Operations map indexed by ID</li>
                    </ul>
                </div>
                <div class="mermaid">
classDiagram
    class Bridge {
        -static Map instances
        +string id
        +BridgeContext context
        +Map operations
        +static getInstance(id)
        +executeOperation(operationId)
        +registerOperation(operation)
    }
    class BridgeContext {
        +string chain
        +string address
        +ControllerProperties controllers_properties
        +number valid_from
        +number valid_to
    }
    Bridge o-- BridgeContext
    note for Bridge "Multiton Pattern: One per chain+address"
                </div>
            </div>
        </div>

        <div id="section-8">
            <div class="diagram-section">
                <h2>8. Rubic Cross-Chain Swap Flow</h2>
                <div class="key-concepts">
                    <h4>üîë Key Concepts</h4>
                    <ul>
                        <li>Step 1: Get quote from Rubic API with quote ID</li>
                        <li>Step 2: Get swap transaction data using quote ID</li>
                        <li>Step 3: Client signs and submits transaction</li>
                        <li>Rubic handles cross-chain bridge execution</li>
                    </ul>
                </div>
                <div class="mermaid">
sequenceDiagram
    participant Client
    participant RubicService
    participant RubicAPI
    Client->>RubicService: get_trade request
    RubicService->>RubicAPI: POST /quote-best
    RubicAPI->>RubicService: Return quote with ID
    RubicService->>Client: Return quote
    Client->>RubicService: execute_trade with quoteId
    RubicService->>RubicAPI: POST /swap
    RubicAPI->>RubicService: Return transaction data
    RubicService->>Client: Return transaction
    Client->>Client: Sign transaction
    Client->>RubicService: Send raw transaction
    RubicService->>Client: Return tx hash
                </div>
            </div>
        </div>

        <div id="section-9">
            <div class="diagram-section">
                <h2>9. Multi-Chain Transaction Execution</h2>
                <div class="key-concepts">
                    <h4>üîë Key Concepts</h4>
                    <ul>
                        <li>Group operations by chain type</li>
                        <li>Execute EVM, Solana, Aptos operations in parallel</li>
                        <li>Collect results from all chains</li>
                        <li>Support partial success across chains</li>
                    </ul>
                </div>
                <div class="mermaid">
flowchart TD
    START([Multi-chain XM Script])
    START --> GROUP[Group by chain]
    GROUP --> EVMOPS[Execute EVM operations]
    GROUP --> SOLOPS[Execute Solana operations]
    GROUP --> APTOPS[Execute Aptos operations]
    EVMOPS --> MERGE[Merge results]
    SOLOPS --> MERGE
    APTOPS --> MERGE
    MERGE --> ANALYZE[Analyze success rate]
    ANALYZE --> RETURN[Return complete results]
    style START fill:#e1f5ff
    style RETURN fill:#c8e6c9
                </div>
            </div>
        </div>

        <div id="section-10">
            <div class="diagram-section">
                <h2>10. Complete Multichain Lifecycle State Machine</h2>
                <div class="key-concepts">
                    <h4>üîë Key Concepts</h4>
                    <ul>
                        <li>Script Creation ‚Üí Submission ‚Üí Parsing ‚Üí Execution ‚Üí Analysis ‚Üí Response</li>
                        <li>Per-operation execution with result tracking</li>
                        <li>Overall success determination based on all operation outcomes</li>
                        <li>Partial success supported (some ops succeed, some fail)</li>
                    </ul>
                </div>
                <div class="mermaid">
stateDiagram-v2
    [*] --> ScriptCreation: Client creates XM Script
    state "Script Creation" as ScriptCreation {
        [*] --> DefineOperations
        DefineOperations --> SetParams
        SetParams --> [*]
    }
    ScriptCreation --> Submission: Submit via RPC
    state "Script Submission" as Submission {
        [*] --> RPCCall
        RPCCall --> Dispatch
        Dispatch --> [*]
    }
    Submission --> Parsing: XMDispatcher.digest
    state "Script Parsing" as Parsing {
        [*] --> AnalyzeOps
        AnalyzeOps --> [*]
    }
    Parsing --> Execution: XMParser.execute
    state "Operation Execution" as Execution {
        [*] --> IterateOps
        IterateOps --> DispatchTask
        DispatchTask --> StoreResult
        StoreResult --> [*]
    }
    Execution --> ResultAnalysis
    state "Result Analysis" as ResultAnalysis {
        [*] --> CountFailures
        CountFailures --> [*]
    }
    ResultAnalysis --> [*]: Return to client
                </div>
            </div>
        </div>

        <!-- Key File References -->
        <div class="diagram-section" style="background: linear-gradient(135deg, #fff9e6 0%, #ffe0b2 100%); border: none;">
            <h2>üìÅ Key File References</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem; margin-top: 1rem;">
                <div class="file-reference">
                    <h4 style="margin-bottom: 0.5rem; color: #ef6c00;">Multichain Core</h4>
                    <ul style="margin-left: 1.5rem;">
                        <li>XMDispatcher.ts (71 lines)</li>
                        <li>XMParser.ts (153 lines)</li>
                        <li>executors/pay.ts</li>
                        <li>executors/contract_read.ts</li>
                    </ul>
                </div>
                <div class="file-reference">
                    <h4 style="margin-bottom: 0.5rem; color: #ef6c00;">Bridge System</h4>
                    <ul style="margin-left: 1.5rem;">
                        <li>bridges.ts (114 lines)</li>
                        <li>manageNativeBridge.ts (60 lines)</li>
                        <li>manageBridge.ts (44 lines)</li>
                    </ul>
                </div>
                <div class="file-reference">
                    <h4 style="margin-bottom: 0.5rem; color: #ef6c00;">Rubic Integration</h4>
                    <ul style="margin-left: 1.5rem;">
                        <li>rubic.ts (200+ lines)</li>
                        <li>Rubic API v2 endpoints</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Principles -->
        <div class="diagram-section" style="background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%); border: none;">
            <h2>üí° Bridges & Multichain Principles</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 1rem; margin-top: 1rem;">
                <div class="key-concepts">
                    <h4>Core Principles</h4>
                    <ul>
                        <li><strong>Multi-Chain Support</strong>: Unified interface for EVM, Solana, Aptos</li>
                        <li><strong>XM Script Flexibility</strong>: JSON-based with named operations</li>
                        <li><strong>Partial Success Model</strong>: Scripts can partially succeed</li>
                        <li><strong>Chain ID Resolution</strong>: Automatic for EVM networks</li>
                        <li><strong>Bridge Multiton Pattern</strong>: One instance per chain+address</li>
                    </ul>
                </div>
                <div class="key-concepts">
                    <h4>Advanced Features</h4>
                    <ul>
                        <li><strong>CVSA-Based Controllers</strong>: Bridge controllers via CVSA</li>
                        <li><strong>Native Bridge Compilation</strong>: Two-step client signing flow</li>
                        <li><strong>Rubic Quote-Based Flow</strong>: Get quote ‚Üí swap data ‚Üí execute</li>
                        <li><strong>Operation Executors</strong>: Specialized per chain and type</li>
                        <li><strong>RPC Provider Selection</strong>: Dynamic based on chain</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="controls">
        <button class="btn" onclick="window.print()">üñ®Ô∏è Print</button>
        <button class="btn" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">‚¨ÜÔ∏è Top</button>
    </div>

    <footer>
        <p>&copy; 2025 Demos Blockchain - Bridges & Multichain Integration Documentation</p>
        <p style="margin-top: 0.5rem; opacity: 0.8;">Generated with Mermaid.js | Interactive Diagram Viewer</p>
    </footer>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            securityLevel: 'loose',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });

        function setActive(element) {
            document.querySelectorAll('nav a').forEach(link => link.classList.remove('active'));
            element.classList.add('active');
        }

        window.addEventListener('scroll', () => {
            const sections = document.querySelectorAll('[id^="section-"]');
            const navLinks = document.querySelectorAll('nav a');
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (window.pageYOffset >= sectionTop - 200) {
                    current = section.getAttribute('id');
                }
            });
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
        });

        document.querySelectorAll('nav a').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });
    </script>
</body>
</html>
